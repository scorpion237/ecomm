"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[932],{46932:function(e,s,i){i.r(s),i.d(s,{default:function(){return AsideMenu}});var n=i(85893),t=i(86010),l=i(78089),c=i(58509),r=i(67294),d=i(9880),a=i(84962),o=i(59417),u=i(99603),m=i(41664),h=i.n(m);function AsideMenuList(e){let{menuList:s}=e,i=(0,l.C)(e=>e.app.isRouteChanging),[c,d]=(0,r.useState)([]);(0,r.useEffect)(()=>{if(i)return;let e=s.findIndex(e=>e.isActive);-1!==e&&d([e])},[i]);let toggleOpen=e=>{d(s=>s.includes(e)?s.filter(s=>s!==e):[...s,e])};return(0,n.jsx)("nav",{children:(0,n.jsx)("ul",{className:"aside-menu__list list-unstyled",itemScope:!0,itemType:"//schema.org/ItemList",children:s.map((e,s)=>{let i=e.children&&e.children.length>0,l=i&&c.includes(s);return(0,n.jsxs)("li",{className:(0,t.Z)("aside-menu__root-element",{active:e.isActive,"has-children":i,open:l}),...i?{onClick:()=>toggleOpen(s)}:{},children:[(0,n.jsx)("div",{itemProp:"itemListElement",itemScope:!0,itemType:"//schema.org/ListItem",children:(0,n.jsx)(ListElement,{item:e,position:s,open:l})}),i&&(0,n.jsx)(ChildList,{children:e.children})]},e.title+s)})})})}function ChildList(e){let{children:s}=e;return(0,n.jsx)("ul",{className:"aside-menu__child-list list-unstyled",children:s.map((e,s)=>(0,n.jsx)("li",{className:(0,t.Z)({active:e.isActive}),children:(0,n.jsx)(ListElement,{item:e})},e.title+s))})}function ListElement(e){let{item:s,position:i,open:l}=e,c=s.img||null,r=s.children&&s.children.length>0,d=void 0!==i,a=c?(0,n.jsx)("img",{src:c.src,className:"me-2",alt:s.title,width:c.width,height:c.height}):null;return s.url&&(d||!s.isActive)?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(h(),{href:s.url,className:(0,t.Z)("aside-menu__element is-link",d?"is-root":"is-child",{active:s.isActive}),...d?{onClick:e=>e.preventDefault()}:{},children:[(0,n.jsxs)("span",{children:[c&&(0,n.jsx)("span",{className:"img-link",children:a}),(0,n.jsx)("span",{...d?{itemProp:"name"}:{},children:s.title})]}),d&&r&&(0,n.jsx)(u.G,{className:"ms-2",icon:l?o.eW2:o.I4f})]}),d&&(0,n.jsx)("meta",{itemProp:"position",content:String(i+1)}),!d&&r&&(0,n.jsx)(ChildList,{children:s.children})]}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{className:(0,t.Z)("aside-menu__element",d?"is-root":"is-child",{active:s.isActive}),children:[(0,n.jsxs)("span",{children:[c&&a,s.title]}),d&&r&&(0,n.jsx)(u.G,{className:"ms-2",icon:l?o.eW2:o.I4f})]}),!d&&r&&(0,n.jsx)(ChildList,{children:s.children})]})}var p=i(9463);function AsideMenu(e){let{menuList:s}=e,i=(0,r.useRef)(null),m=(0,l.C)(e=>e.asideMenu.isOpened),h=(0,l.C)(e=>e.app.isRouteChanging),f=(0,l.T)(),v=(0,r.useRef)(null),closeIfOpened=()=>{m&&f((0,d.g)(!1))},onEscPressed=e=>{!e.defaultPrevented&&m&&(void 0!==e.key&&"Escape"===e.key?closeIfOpened():void 0!==e.keyCode&&27===e.keyCode&&closeIfOpened())},enableSwipe=()=>{let e=document.querySelector("body");e.style.touchAction="none",v.current=new p.DragGesture(e,e=>{let{last:s,movement:i}=e;s&&i[0]>100&&closeIfOpened()})},disableSwipe=()=>{let e=document.querySelector("body");v.current&&v.current.destroy(),v.current=null,e.style.touchAction="auto"};return(0,r.useEffect)(()=>{h&&closeIfOpened()},[h]),(0,r.useEffect)(()=>(m?(i.current&&(0,c.Qp)(i.current),enableSwipe(),window.addEventListener("resize",closeIfOpened),window.addEventListener("keydown",onEscPressed)):(i.current&&(0,c.tG)(i.current),disableSwipe(),window.removeEventListener("resize",closeIfOpened),window.removeEventListener("keydown",onEscPressed)),()=>{(0,c.tP)(),window.removeEventListener("resize",closeIfOpened),window.removeEventListener("keydown",onEscPressed),disableSwipe()}),[m]),(0,n.jsxs)("aside",{className:(0,t.Z)("aside-menu",{"aside-menu_visible":m}),ref:i,children:[(0,n.jsxs)("div",{className:"aside-menu__header",children:[(0,n.jsx)(a.Z,{className:"cart-header cart-header_horizontal"}),(0,n.jsx)("button",{className:"btn",onClick:closeIfOpened,children:(0,n.jsx)(u.G,{icon:o.NBC})})]}),s&&(0,n.jsx)(AsideMenuList,{menuList:s})]})}}}]);